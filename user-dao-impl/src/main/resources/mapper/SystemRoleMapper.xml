<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.digital.dance.dao.SystemRoleDao">
	<resultMap id="systemRoleResultMap" type="com.digital.dance.entity.SystemRoleEO">
		<id column="roleId" property="roleId" jdbcType="VARCHAR"/>
		<result column="roleName" property="roleName" jdbcType="VARCHAR"/>
		<result column="roleDesc" property="roleDesc" jdbcType="VARCHAR"/>
	</resultMap>
	
	<!-- 插入角色-->
	<insert id="addSystemRole" keyProperty="roleId" useGeneratedKeys="false" parameterType="systemRoleEO">
        insert into user_role
        (roleId,roleName,roleDesc) values
        (   #{roleId,jdbcType=VARCHAR},
            #{roleName,jdbcType=VARCHAR},
            #{roleDesc,jdbcType=VARCHAR})
  </insert>   

  <!-- 查询角色-->
  <select id="findSystemRoleByRoleName" resultMap="systemRoleResultMap" parameterType="string">
		select roleId,roleName,roleDesc from user_role where roleName =#{roleName,jdbcType=VARCHAR} limit 1
  </select>
  <select id="findSystemRoleByRoleId" resultMap="systemRoleResultMap" parameterType="string">
		select roleId,roleName,roleDesc from user_role where roleId =#{roleId,jdbcType=VARCHAR} limit 1
  </select>
  
  <select id="findPagedSystemRoles" resultMap="systemRoleResultMap" parameterType="systemRoleEO">
		select roleId,roleName,roleDesc from user_role where 1=1
		<if test="roleId != null">
		    and roleId =#{roleId,jdbcType=VARCHAR}
	    </if>
		<if test="roleName != null">
		    and roleName =#{roleName,jdbcType=VARCHAR}
		</if>
		 limit #{pageSize,jdbcType=INTEGER} offset #{offsetNum,jdbcType=INTEGER} 
  </select>
  <select id="findAllSystemRoles" resultMap="systemRoleResultMap" parameterType="systemRoleEO">
		select roleId,roleName,roleDesc from user_role where 1=1
		<if test="roleId != null">
		    and roleId =#{roleId,jdbcType=VARCHAR}
	    </if>
		<if test="roleName != null">
		    and roleName =#{roleName,jdbcType=VARCHAR}
		</if>
  </select>
  
 <select id="searchPagedSystemRoles" resultMap="systemRoleResultMap" parameterType="systemRoleEO">
		select roleId,roleName,roleDesc from user_role where 1=1
		<if test="roleId != null">
			and roleId like concat(concat('%',#{roleId,jdbcType=VARCHAR}),'%')
		</if>
		<if test="roleName != null">
			and roleName like concat(concat('%',#{roleName,jdbcType=VARCHAR}),'%')
		</if>
		limit #{pageSize,jdbcType=INTEGER} offset #{offsetNum,jdbcType=INTEGER}
  </select>
  <select id="searchAllSystemRoles" resultMap="systemRoleResultMap" parameterType="systemRoleEO">
		select roleId,roleName,roleDesc from user_role where 1=1
		<if test="roleId != null">
			and roleId like concat(concat('%',#{roleId,jdbcType=VARCHAR}),'%')
		</if>
		<if test="roleName != null">
			and roleName like concat(concat('%',#{roleName,jdbcType=VARCHAR}),'%')
		</if>
  </select>
  
  	<update id="updateSystemRoles" parameterType="systemRoleEO">
	     <!-- update多角色SQL-->
	     <foreach item="item" collection="list" index="index" separator=";">	    
		     update user_role
		     set roleName = #{item.roleName,jdbcType=VARCHAR}, roleDesc = #{item.roleDesc,jdbcType=VARCHAR}
		     where roleId = #{item.roleId,jdbcType=VARCHAR}
	     </foreach>
	</update>   
  
	<delete id="deleteSystemRoles" parameterType="systemRoleEO">
		<!-- delete多角色SQL-->
	    <foreach item="item" collection="list" index="index" separator=";">	    
		     delete from user_role
		     where roleId = #{item.roleId,jdbcType=VARCHAR}
	    </foreach>
	</delete>
</mapper>